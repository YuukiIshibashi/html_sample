<script>
  // function calc() {
  //    window.alert(`${document.getElementById("product").value}円。${document.getElementById("number").value}つ`)
  // }

  // function calc() {
  //    const price = document.getElementById("product").value;
  //    const number = document.getElementById("number").value;
  //    const sum = price * number
  //    window.alert(`合計は${sum}円です`)
  // }

  // function calc() {
  //    const price = document.getElementById("product").value;
  //    const number = document.getElementById("number").value;
  //    let sum = price * number;
  //    let postage = 0;
  //    if (sum == 0 || sum >= 3000) {
  //      postage = 0
  //    } else if (sum < 1000){
  //      postage = 500
  //    } else {
  //      postage = 250
  //    }
  //    window.alert(`送料は${postage}円です。合計は${sum + postage}円です`)
  // }
  let purchases = [];
  function add() {
    const price = document.getElementById("product").value;
    const number = document.getElementById("number").value;
    let purchase = {
      price: price,
      number: number,
    };
    purchases.push(purchase)
    window.alert(`${display()}\n小計${subtotal()}円`)
  }
  function display() {
    // let string = "";
    // for(let i=0; i<purchases.length; i++){
    //   string += `${purchases[i].price}円が${purchases[i].number}点\n`;
    // }
    // return string
    return purchases.map(function(purchase) {
      return `${purchase.price}円が${purchase.number}点`
    })
  };
  function subtotal() {
    // let sum = 0;
    //  for(let i=0; i<purchases.length; i++){
    //   sum += purchases[i].price * purchases[i].number;
    // }
    // return sum;
    return purchases.reduce(function(prev,purchase) {
      return prev + purchase.price * purchase.number 
    }, 0)
  }
  function calc() {
    // let sum = 0;
    // let index = 0;
    // while(index<purchases.length) {
    //   sum += purchases[index].price * purchases[index].number;
    //   index++;
    // }
    let sum = subtotal();
    let postage = 0;
     if (sum == 0 || sum >= 3000) {
       postage = 0
     } else if (sum < 1000){
       postage = 500
     } else {
       postage = 250
     }
     window.alert(`小計は${sum}円、送料は${postage}円です。合計は${sum + postage}円です`);
     purchases = [];
  }
  // function calc2() {
  //   const products = document.getElementsByClassName("products")
  //   const numbers = document.getElementsByClassName("numbers")
  //   let sum = 0;
  //   for(let i=0; i<products.length; i++){
  //     console.log(numbers[i])
  //     sum += products[i].value * numbers[i].value;
  //     console.log(sum)
  //   }
  //   let postage = 0;
  //    if (sum == 0 || sum >= 3000) {
  //      postage = 0
  //    } else if (sum < 1000){
  //      postage = 500
  //    } else {
  //      postage = 250
  //    }
  //    window.alert(`送料は${postage}円です。合計は${sum + postage}円です`)
  // }



  // let purchases = [];
  // function add() {
  //   const price = document.getElementById("product").value;
  //   const number = document.getElementById("number").value;
  //   let purchase = {
  //     price: price,
  //     number: number,
  //   };
  //   purchases.push(purchase)
  // }
  // function calc() {
  //   let sum = 0;
  //    for(let i=0; i<purchases.length; i++){
  //     sum += purchases[i].price * purchases[i].number;
  //   }
  //    if (sum == 0 || sum >= 3000) {
  //      postage = 0
  //    } else if (sum < 1000){
  //      postage = 500
  //    } else {
  //      postage = 250
  //    }
  //    window.alert(`送料は${postage}円です。合計は${sum + postage}円です`)
  // }
</script>